(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(t,e,a){},24:function(t,e,a){t.exports=a(59)},29:function(t,e,a){},38:function(t,e,a){},39:function(t,e,a){},40:function(t,e,a){},58:function(t,e,a){},59:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(21),c=a.n(o),s=(a(29),a(2)),i=a(6),u=a(4),l=a(3),m=a(5),p=a(22),h=a.n(p),d=(a(38),a(39),function(t){function e(){return Object(s.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"CommitStatus"))}}]),e}(r.a.Component)),f=a(23),E=a(7),b=(a(12),a(40),a(9)),j=function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(o)))).state={input:""},a.handleChange=function(t){a.setState({input:t.target.value})},a.handleSubmit=function(t){t.preventDefault();var e={};Object({NODE_ENV:"production",PUBLIC_URL:"/commit-status"}).REACT_APP_GITHUB_TOKEN&&(e.headers={Authorization:Object({NODE_ENV:"production",PUBLIC_URL:"/commit-status"}).REACT_APP_GITHUB_TOKEN}),console.log("https://api.github.com/repos/".concat(a.state.input,"/commits/master/status")),b.get("https://api.github.com/repos/".concat(a.state.input,"/commits/master/status"),e).then(function(t){var e={name:t.data.repository.full_name,status:t.data.state};a.props.addProject(e)}).catch(console.log()),a.setState({input:""})},a.handlePress=function(t){t.preventDefault(),a.setState({input:""})},a.render=function(){return r.a.createElement("div",{className:"search project"},r.a.createElement("form",{onSubmit:a.handleSubmit},r.a.createElement("input",{className:"input",type:"text",onChange:a.handleChange,value:a.state.input,placeholder:"Add a repo..."}),r.a.createElement("button",{className:"button",type:"submit"},"Add"),a.state.input?r.a.createElement("button",{onClick:a.handlePress,className:"button"},"X"):null))},a}return Object(m.a)(e,t),e}(r.a.Component),O=(a(58),a(9)),v=function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={commitDetails:null},a.componentDidMount=function(){var t={};Object({NODE_ENV:"production",PUBLIC_URL:"/commit-status"}).REACT_APP_GITHUB_TOKEN&&(t.headers={Authorization:Object({NODE_ENV:"production",PUBLIC_URL:"/commit-status"}).REACT_APP_GITHUB_TOKEN}),O.get("https://api.github.com/repos/".concat(a.props.name,"/commits"),t).then(function(t){return a.setState({commitDetails:t.data})})},a}return Object(m.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return this.state.commitDetails?r.a.createElement("div",null,"Commit Details",r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Committer"),r.a.createElement("th",null,"Message"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Changes"))),r.a.createElement("tbody",null,this.state.commitDetails.map(function(t,e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,t.commit.committer.name),r.a.createElement("td",null,t.commit.message),r.a.createElement("td",null,t.commit.committer.date),r.a.createElement("td",null,r.a.createElement("a",{href:t.html_url,rel:"noopener noreferrer",target:"_blank"},"See changes here")))})))):r.a.createElement("div",null,r.a.createElement("h5",null,"Loading details ..."))}}]),e}(n.Component),_=a(9),g=function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(o)))).state={projects:[]},a.componentDidMount=function(){var t=Object(E.a)(a),e=[];a.serverRequest=_.get(a.props.source).then(function(a){var n=a.data.defaultStatus;a.data.projects.map(function(t){return e.push({name:t,status:n})}),t.setState({projects:e.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:t.status>e.status?-1:1})});var r={};Object({NODE_ENV:"production",PUBLIC_URL:"/commit-status"}).REACT_APP_GITHUB_TOKEN&&(r.headers={Authorization:Object({NODE_ENV:"production",PUBLIC_URL:"/commit-status"}).REACT_APP_GITHUB_TOKEN});var o=e.map(function(t){return _.get("https://api.github.com/repos/".concat(t.name,"/commits/master/status"),r)});Promise.all(o).then(function(a){console.log("values",a),e=[],a.map(function(t){return e.push({name:t.data.repository.full_name,status:t.data.state})}),t.setState({projects:e})},function(t){console.log("error",t)}).catch(console.log())})},a.handlePress=function(t){var e=a.state.projects.filter(function(e){return e.name!==t});a.setState({projects:e})},a.addProject=function(t){var e=0;if(a.state.projects.forEach(function(a){a.name===t.name&&a.status===t.status&&(e=1)}),1!==e){var n=[].concat(Object(f.a)(a.state.projects),[t]);a.setState({projects:n})}},a.render=function(){var t=a.handlePress,e=a.addProject;return r.a.createElement("div",null,r.a.createElement(j,{addProject:function(t){return e(t)}}),a.state.projectStatus,a.state.projects.map(function(e,n){return r.a.createElement("div",{key:n,className:"project ".concat(e.status),onClick:function(){return a.handleProjectClick(n)}},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(e.name)},e.name)," ","- ",r.a.createElement("span",{className:e.status},e.status),r.a.createElement("button",{className:"remove",onClick:function(a){return t(e.name)}},"Remove"),e.isOpen&&r.a.createElement(v,{name:e.name}))}))},a}return Object(m.a)(e,t),Object(i.a)(e,[{key:"handleProjectClick",value:function(t){this.setState({projects:this.state.projects.map(function(e,a){return a!==t||a===t&&e.isOpen?(e.isOpen=!1,e):(e.isOpen=!0,e)})})}}]),e}(r.a.Component),C=function(t){function e(){return Object(s.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,{htmlAttributes:{lang:"en",amp:void 0},meta:[{name:"description",content:"A simple React app that shows a list of projects with their Github commit status and use it as a dashboard to view status of your CI pipelines."}],title:"CommitStatus"}),r.a.createElement(d,null),r.a.createElement(g,{source:"./data/repositories.json"}))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.6d5b2a91.chunk.js.map